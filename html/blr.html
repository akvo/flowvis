<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Akvo FLOW</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />

<style>
#map {
    width: 100%;
    height: 600px;
}
</style>

</head>
<body>
  <script type="text/x-handlebars" data-template-name="index">
    <div id="map">
    </div>
    <div>
    {{ zoom }}
    </div>
  </script>

  <script src="js/libs/jquery-1.10.2.js"></script>
  <script src="js/libs/d3.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
  <script src="js/libs/handlebars-1.1.2.js"></script>
  <script src="js/libs/ember-1.4.0.js"></script>
  <script src="js/libs/ember-data-1.0.0.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
  <script src="js/libs/ember-leaflet.js"></script>
  <script src="js/libs/coffee-script.js"></script>
<script type="text/coffeescript">
App = Ember.Application.create()

App.IndexView = EmberLeaflet.MapView.extend
    center: L.latLng 13, 77.78
    zoom: 12
    didInsertElement: () ->
        @_super()
        map = @_layer
        svg = d3.select(map.getPanes().overlayPane).append "svg"
            .attr "width", 800
            .attr "height", 600

        g = svg.append("g").attr "class", "leaflet-zoom-hide"
        pt = map.latLngToLayerPoint new L.latLng(13, 77.762)
        g.append "circle"
            .attr "cx", pt.x
            .attr "cy", pt.y
            .attr "r", 5
            .style "fill", "red"
        console.log pt
</script>
</body>
</html>
